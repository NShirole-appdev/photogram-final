<h1>List of users</h1>

<hr>

<table border="1">
  <tr>
    <th>
      ID
    </th>

    <th>
      Username
    </th>

    <th>Private?</th>
  </tr>

  <% @users.each do |user| %>
  <tr>
    <td>
      <%= user.id %>
    </td>

    <td>
      <%= user.username %>
    </td>

    <td>
     <%= human_boolean(user.private) %>
    </td>

    <td>
      <a href="/users/<%= user.username %>">Show details</a>
    </td>

  <% if @current_user != nil %>
    <td>
            <form action="/insert_follow_request" method="post">
            <input type="hidden" name="query_recipient_id" value=<%= user.id %>>
            <input type="hidden" name="query_sender_id" value=<%= @current_user.id %>>
            <% if user.private %>
            <input type="hidden" name="query_status" value= "accepted" >
            <% else %>
            <input type="hidden" name="query_status" value= "pending" >
            <% end %>
            <button>
              Follow
            </button>
    </td>
    <% else end %>
  </tr>
  
  <% end %>
</table>
